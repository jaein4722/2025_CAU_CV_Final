---
description: 
globs: 
alwaysApply: true
---
# ğŸ› ï¸ í”„ë¡œì íŠ¸ ì—ëŸ¬ í•¸ë“¤ë§ ê°€ì´ë“œ

> **ëª©ì **: ë‹¤ìŒ ì‘ì—…ìê°€ ë°˜ë³µ ê°€ëŠ¥í•œ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê³  íš¨ìœ¨ì ì¸ ê°œë°œì„ ë•ê¸° ìœ„í•œ ê°€ì´ë“œ  
> **ì—…ë°ì´íŠ¸**: 2025ë…„ 6ì›” 15ì¼  
> **ê¸°ë°˜**: 83íšŒ ì‹¤í—˜ì—ì„œ ë°œìƒí•œ ì‹¤ì œ ì—ëŸ¬ë“¤ ë° í•´ê²° ë°©ë²•

---

## ğŸš¨ 1. ìµœìš°ì„  í™•ì¸ì‚¬í•­ (ì‹¤í—˜ ì‹œì‘ ì „ í•„ìˆ˜)

### 1.1 íŒŒë¼ë¯¸í„° ìˆ˜ ì œí•œ í™•ì¸ âš ï¸
```python
# ëª¨ë¸ ìƒì„± í›„ ë°˜ë“œì‹œ íŒŒë¼ë¯¸í„° ìˆ˜ í™•ì¸
model = YourModel(in_channels=3, num_classes=21)
total_params = sum(p.numel() for p in model.parameters() if p.requires_grad)
print(f"Total trainable parameters: {total_params:,}")

# ì œí•œ í™•ì¸
assert total_params <= 10_000, f"Parameter limit exceeded: {total_params} > 10,000"
```

**âŒ í”í•œ ì‹¤ìˆ˜**: 3 million ì œí•œìœ¼ë¡œ ì°©ê°í•˜ê¸°  
**âœ… ì •ë‹µ**: **10,000ê°œ** íŒŒë¼ë¯¸í„° ì œí•œ

### 1.2 ëª¨ë¸ í´ë˜ìŠ¤ëª… í™•ì¸
```python
# ìµœì¢… ì œì¶œ ëª¨ë¸ì˜ í´ë˜ìŠ¤ëª…ì€ ë°˜ë“œì‹œ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•¨
class submission_20221555(nn.Module):
    def __init__(self, in_channels, num_classes):
        super().__init__()
        # ëª¨ë¸ êµ¬í˜„
```

**âŒ í”í•œ ì‹¤ìˆ˜**: ë‹¤ë¥¸ í´ë˜ìŠ¤ëª… ì‚¬ìš© (MicroNet, HWNet ë“±)  
**âœ… ì •ë‹µ**: `submission_20221555` ê³ ì •

---

## ğŸ”§ 2. ëª¨ë¸ ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­

### 2.1 ìƒˆ ëª¨ë¸ ìƒì„± vs ê¸°ì¡´ ëª¨ë¸ ìˆ˜ì •

#### ğŸ†• ìƒˆ ëª¨ë¸ ì‹¤í—˜ ì‹œ (ê¶Œì¥)
```python
# ìƒˆ íŒŒì¼ ìƒì„±: models/submission_20221555/submission_ModelNamev2.py
class submission_ModelNamev2(nn.Module):
    def __init__(self, in_channels, num_classes):
        # ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ ì‹¤í—˜
```

**âœ… ì¥ì **: ì´ì „ ë²„ì „ê³¼ ë¹„êµ ê°€ëŠ¥, ë¡¤ë°± ìš©ì´  
**âœ… ì‚¬ìš© ì‹œê¸°**: ì•„í‚¤í…ì²˜ ë³€ê²½, ìƒˆë¡œìš´ ì‹¤í—˜

#### ğŸ”„ ê¸°ì¡´ ëª¨ë¸ ìˆ˜ì • ì‹œ
```python
# ê°™ì€ íŒŒì¼ì—ì„œ ìˆ˜ì •: models/submission_20221555/submission_ModelName.py
# ë²„ê·¸ ìˆ˜ì •, í•˜ì´í¼íŒŒë¼ë¯¸í„° ì¡°ì • ë“±
```

**âœ… ì‚¬ìš© ì‹œê¸°**: ë²„ê·¸ ìˆ˜ì •, ì‘ì€ ì¡°ì •  
**âŒ í”¼í•  ìƒí™©**: ëŒ€ê·œëª¨ ì•„í‚¤í…ì²˜ ë³€ê²½

### 2.2 íŒŒë¼ë¯¸í„° ê³„ì‚° ì‹¤ìˆ˜ ë°©ì§€

#### ê³„ì‚° ë„êµ¬ í™œìš©
```python
from torchsummary import summary

# ëª¨ë¸ ìš”ì•½ ì •ë³´ë¡œ íŒŒë¼ë¯¸í„° í™•ì¸
model = YourModel(3, 21)
summary(model, (3, 256, 256))
```

#### ìˆ˜ë™ ê³„ì‚° ê²€ì¦
```python
def count_parameters(model):
    """ì •í™•í•œ íŒŒë¼ë¯¸í„° ìˆ˜ ê³„ì‚°"""
    total = 0
    for name, param in model.named_parameters():
        if param.requires_grad:
            params = param.numel()
            print(f"{name}: {params:,}")
            total += params
    return total

total_params = count_parameters(model)
print(f"Total: {total_params:,}")
```

---

## ğŸ› 3. ìì£¼ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì™€ í•´ê²°ë²•

### 3.1 RuntimeError: size mismatch
```python
# ì—ëŸ¬ ì˜ˆì‹œ
RuntimeError: size mismatch, m1: [16 x 2048], m2: [1024 x 256]

# ì›ì¸: Adaptive pooling í›„ ì°¨ì› ë¶ˆì¼ì¹˜
# í•´ê²°ë²•: ë””ë²„ê·¸ ì¶œë ¥ ì¶”ê°€
def forward(self, x):
    x = self.encoder(x)
    print(f"After encoder: {x.shape}")  # ë””ë²„ê·¸
    x = self.adaptive_pool(x)
    print(f"After pooling: {x.shape}")  # ë””ë²„ê·¸
    # ...
```

**âœ… í•´ê²°ì±…**: ê° ë‹¨ê³„ë³„ í…ì„œ í¬ê¸° í™•ì¸ í›„ ì°¨ì› ì¡°ì •

### 3.2 CUDA out of memory
```python
# ì—ëŸ¬ ìƒí™©: GPU ë©”ëª¨ë¦¬ ë¶€ì¡±
RuntimeError: CUDA out of memory

# í•´ê²°ë²• 1: ë°°ì¹˜ í¬ê¸° í™•ì¸ (ê³ ì •ê°’ 16 ì‚¬ìš© ì¤‘ì¸ì§€)
# í•´ê²°ë²• 2: ëª¨ë¸ í¬ê¸° ì¤„ì´ê¸°
# í•´ê²°ë²• 3: GPU ë©”ëª¨ë¦¬ ì •ë¦¬
torch.cuda.empty_cache()
```

**âŒ í”¼í•´ì•¼ í•  í–‰ë™**: ë°°ì¹˜ í¬ê¸° ì„ì˜ ë³€ê²½ (16 ê³ ì •)  
**âœ… ì˜¬ë°”ë¥¸ ì ‘ê·¼**: ëª¨ë¸ ë³µì¡ë„ ì¤„ì´ê¸°

### 3.3 í›ˆë ¨ì´ ìˆ˜ë ´í•˜ì§€ ì•ŠëŠ” ê²½ìš°
```python
# ì¦ìƒ: Lossê°€ ê°ì†Œí•˜ì§€ ì•Šê±°ë‚˜ NaN ë°œìƒ

# ì²´í¬ë¦¬ìŠ¤íŠ¸:
1. ìŠ¤ì¼€ì¤„ëŸ¬ í™•ì¸ (WarmupCosineLR ì‚¬ìš© ê¶Œì¥)
2. í•™ìŠµë¥  ì ì •ì„± (0.01 ê¶Œì¥)
3. Gradient clipping í•„ìš”ì„±
4. ë°°ì¹˜ ì •ê·œí™” ìœ„ì¹˜
```

**âœ… ê²€ì¦ëœ ì„¤ì •**:
```python
# training_args.py
optimizer = AdamW(lr=0.01, weight_decay=0.0001)
scheduler = WarmupCosineLR(T_max=50, warmup=5)
```

---

## âš¡ 4. ì„±ëŠ¥ ìµœì í™” íŒ

### 4.1 íŒŒë¼ë¯¸í„° íš¨ìœ¨ì„± ê·¹ëŒ€í™”
```python
# âœ… ê¶Œì¥: Depthwise Separable Convolution
nn.Conv2d(in_channels, in_channels, 3, groups=in_channels, padding=1),  # Depthwise
nn.Conv2d(in_channels, out_channels, 1)  # Pointwise

# âŒ ë¹„ê¶Œì¥: ì¼ë°˜ Convolution (íŒŒë¼ë¯¸í„° ë¹„íš¨ìœ¨ì )
nn.Conv2d(in_channels, out_channels, 3, padding=1)
```

### 4.2 ì±„ë„ ë¶„í•  ì „ëµ
```python
# HWNet ìŠ¤íƒ€ì¼ partial convolution
def partial_conv(x, ratio=0.5):
    c = x.size(1)
    c1 = int(c * ratio)
    x1, x2 = x[:, :c1], x[:, c1:]
    x1 = self.conv(x1)  # ì¼ë¶€ë§Œ ì—°ì‚°
    return torch.cat([x1, x2], dim=1)
```

### 4.3 ì–´í…ì…˜ ë©”ì»¤ë‹ˆì¦˜ ê²½ëŸ‰í™”
```python
# âœ… UltraLight SE Attention
class UltraLightSE(nn.Module):
    def __init__(self, channels, reduction=16):
        super().__init__()
        self.squeeze = nn.AdaptiveAvgPool2d(1)
        reduced_channels = max(1, channels // reduction)
        self.excitation = nn.Sequential(
            nn.Conv2d(channels, reduced_channels, 1),
            nn.ReLU(inplace=True),
            nn.Conv2d(reduced_channels, channels, 1),
            nn.Sigmoid()
        )
```

---

## ğŸ”„ 5. ì‹¤í—˜ ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ

### 5.1 ì²´ê³„ì  ì‹¤í—˜ ì§„í–‰
```
1. ê¸°ì¡´ ìµœê³  ì„±ëŠ¥ ëª¨ë¸ ë¶„ì„
   â†“
2. ê°€ì„¤ ì„¤ì • (ì–´ë–¤ ê°œì„ ì„ ì‹œë„í•  ê²ƒì¸ê°€?)
   â†“
3. íŒŒë¼ë¯¸í„° ìˆ˜ ì‚¬ì „ ê³„ì‚°
   â†“
4. ìƒˆ ëª¨ë¸ íŒŒì¼ ìƒì„±
   â†“
5. ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (Model_Test.ipynb)
   â†“
6. í›ˆë ¨ ì‹¤í–‰ (competition_main.ipynb)
   â†“
7. ê²°ê³¼ ë¶„ì„ ë° ë‹¤ìŒ ì‹¤í—˜ ê³„íš
```

### 5.2 ì‹¤í—˜ ë¡œê¹…
```python
# results.csvì— ìë™ìœ¼ë¡œ ê¸°ë¡ë˜ì§€ë§Œ, ì¶”ê°€ ë©”ëª¨ ê¶Œì¥
experiment_notes = {
    "model_name": "MicroNetv14",
    "key_changes": "Added coordinate attention",
    "params": 8456,
    "hypothesis": "Spatial attention will improve edge detection"
}
```

---

## ğŸš‘ 6. ì‘ê¸‰ ìƒí™© ëŒ€ì²˜ë²•

### 6.1 ëª¨ë¸ì´ ë¡œë“œë˜ì§€ ì•ŠëŠ” ê²½ìš°
```python
# ë¬¸ì œ: ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
ModuleNotFoundError: No module named 'submission_20221555'

# í•´ê²°ì±… 1: __init__.py íŒŒì¼ í™•ì¸
# models/submission_20221555/__init__.py ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸

# í•´ê²°ì±… 2: í´ë˜ìŠ¤ëª… í™•ì¸
# submission_20221555 í´ë˜ìŠ¤ê°€ íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
```

### 6.2 í›ˆë ¨ ì¤‘ ì¤‘ë‹¨ëœ ê²½ìš°
```python
# ì²´í¬í¬ì¸íŠ¸ì—ì„œ ì¬ì‹œì‘ ê°€ëŠ¥í•˜ì§€ë§Œ, 
# 30 epochs ì œí•œìœ¼ë¡œ ì¸í•´ ìƒˆë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 

# ë¹ ë¥¸ ë””ë²„ê¹…ì„ ìœ„í•œ ì‘ì€ ë°ì´í„°ì…‹ í…ŒìŠ¤íŠ¸
python test_voc.py  # VOC ë°ì´í„°ì…‹ë§Œìœ¼ë¡œ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
```

### 6.3 Git ì¶©ëŒ í•´ê²°
```bash
# ì‹¤í—˜ íŒŒì¼ë“¤ì´ ë§ì•„ì„œ Git ì¶©ëŒ ë°œìƒ ì‹œ
git stash  # í˜„ì¬ ë³€ê²½ì‚¬í•­ ì„ì‹œ ì €ì¥
git pull   # ìµœì‹  ë³€ê²½ì‚¬í•­ ê°€ì ¸ì˜¤ê¸°
git stash pop  # ë³€ê²½ì‚¬í•­ ë‹¤ì‹œ ì ìš©
```

---

## ğŸ“‹ 7. ì‹¤í—˜ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 7.1 ìƒˆ ì‹¤í—˜ ì‹œì‘ ì „ âœ…
- [ ] íŒŒë¼ë¯¸í„° ìˆ˜ â‰¤ 10,000 í™•ì¸
- [ ] ëª¨ë¸ í´ë˜ìŠ¤ëª… `submission_20221555` ì„¤ì •
- [ ] WarmupCosineLR ìŠ¤ì¼€ì¤„ëŸ¬ ìœ ì§€
- [ ] ìƒˆ íŒŒì¼ëª…ìœ¼ë¡œ ë²„ì „ ê´€ë¦¬ (ì˜ˆ: v14, v15...)
- [ ] ì´ì „ ìµœê³  ì„±ëŠ¥ ëª¨ë¸ ëŒ€ë¹„ ê°œì„ ì  ëª…í™•íˆ ì •ì˜

### 7.2 í›ˆë ¨ ì‹¤í–‰ ì „ âœ…
- [ ] Model_Test.ipynbì—ì„œ ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] GPU ë©”ëª¨ë¦¬ ì¶©ë¶„í•œì§€ í™•ì¸
- [ ] results.csv ë°±ì—… (ì‹¤ìˆ˜ë¡œ ë®ì–´ì“°ê¸° ë°©ì§€)
- [ ] ì‹¤í—˜ ê°€ì„¤ ë° ì˜ˆìƒ ê²°ê³¼ ë©”ëª¨

### 7.3 ê²°ê³¼ ë¶„ì„ í›„ âœ…
- [ ] results.csvì— ê²°ê³¼ ì •ìƒ ê¸°ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] ì´ì „ ëª¨ë¸ë“¤ê³¼ ì„±ëŠ¥ ë¹„êµ
- [ ] ì‹¤íŒ¨ ì‹œ ì›ì¸ ë¶„ì„ ë° ë‹¤ìŒ ì‹¤í—˜ ê³„íš
- [ ] ì„±ê³µ ì‹œ ê°œì„  ìš”ì†Œ ë¶„ì„ ë° ì¶”ê°€ ìµœì í™” ë°©í–¥ ì„¤ì •

---

## ğŸ¯ 8. ìµœì¢… ì œì¶œ ì „ ê²€ì¦ ê°€ì´ë“œ

### 8.1 ì½”ë“œ ê²€ì¦
```python
# 1. ìµœì¢… ëª¨ë¸ í…ŒìŠ¤íŠ¸
model = submission_20221555(3, 21)
assert sum(p.numel() for p in model.parameters() if p.requires_grad) <= 10000

# 2. ëª¨ë“  ë°ì´í„°ì…‹ì—ì„œ forward pass í…ŒìŠ¤íŠ¸
test_inputs = [
    torch.randn(1, 3, 256, 256),  # VOC (21 classes)
    torch.randn(1, 3, 256, 256),  # Binary datasets (2 classes)
]

for i, test_input in enumerate(test_inputs):
    num_classes = 21 if i == 0 else 2
    model = submission_20221555(3, num_classes)
    output = model(test_input)
    assert output.shape == (1, num_classes, 256, 256)
```

### 8.2 íŒŒì¼ ì •ë¦¬
```
í•„ìˆ˜ íŒŒì¼ë“¤:
âœ… models/submission_20221555/submission_ìµœì¢…ëª¨ë¸.py
âœ… training_args.py  
âœ… requirements.txt (ì—…ë°ì´íŠ¸ë¨)
âœ… README.md (ì„ íƒì‚¬í•­ì´ì§€ë§Œ ê¶Œì¥)
```

---

## ğŸ§  9. ë””ë²„ê¹… ë§ˆì¸ë“œì…‹

### 9.1 ì—ëŸ¬ í•´ê²° ì ‘ê·¼ë²•
1. **ì—ëŸ¬ ë©”ì‹œì§€ ì •í™•íˆ ì½ê¸°**: ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ì˜ ë§ˆì§€ë§‰ ì¤„ì´ í•µì‹¬
2. **ë‹¨ê³„ë³„ ë””ë²„ê¹…**: ë³µì¡í•œ ëª¨ë¸ì„ ê°„ë‹¨í•œ ë²„ì „ìœ¼ë¡œ ì¶•ì†Œí•˜ì—¬ í…ŒìŠ¤íŠ¸  
3. **ê²€ì¦ëœ ì½”ë“œ ì°¸ê³ **: ì´ì „ì— ì„±ê³µí•œ ëª¨ë¸ë“¤ì˜ íŒ¨í„´ í™œìš©
4. **íŒŒë¼ë¯¸í„° ì¶”ì **: ê° ë ˆì´ì–´ë³„ íŒŒë¼ë¯¸í„° ìˆ˜ í™•ì¸

### 9.2 ì„±ëŠ¥ ë””ë²„ê¹…
```python
# ì„±ëŠ¥ì´ ì˜ˆìƒë³´ë‹¤ ë‚®ì„ ë•Œ ì²´í¬í•  ê²ƒë“¤:
1. ë°ì´í„° ì „ì²˜ë¦¬ í™•ì¸
2. ì†ì‹¤ í•¨ìˆ˜ ì ì ˆì„±
3. í•™ìŠµë¥  ë° ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
4. ëª¨ë¸ ë³µì¡ë„ vs ë°ì´í„° ë³µì¡ë„ ê· í˜•
5. ë°°ì¹˜ ì •ê·œí™” ë° ë“œë¡­ì•„ì›ƒ ìœ„ì¹˜
```

---

## ğŸ‰ ë§ˆë¬´ë¦¬ ë©”ì‹œì§€

ì´ ê°€ì´ë“œëŠ” **83ë²ˆì˜ ì‹¤í—˜**ì—ì„œ ë°œìƒí•œ ì‹¤ì œ ì—ëŸ¬ë“¤ê³¼ í•´ê²° ê³¼ì •ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. 

**ê¸°ì–µí•˜ì„¸ìš”**:
- ğŸ”´ **íŒŒë¼ë¯¸í„° ì œí•œ 10,000ê°œ** - ì ˆëŒ€ ìŠì§€ ë§ˆì„¸ìš”!
- ğŸŸ¡ **WarmupCosineLR ìŠ¤ì¼€ì¤„ëŸ¬** - í›ˆë ¨ ì•ˆì •ì„±ì˜ í•µì‹¬
- ğŸŸ¢ **ì ì§„ì  ê°œì„ ** - í° ë³€í™”ë³´ë‹¤ëŠ” ì‘ì€ ê°œì„ ë“¤ì˜ ëˆ„ì 

ëª¨ë“  ì‹¤íŒ¨ëŠ” ë” ë‚˜ì€ ëª¨ë¸ë¡œ ê°€ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. **í¬ê¸°í•˜ì§€ ë§ˆì‹œê³  ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì„¸ìš”!** ğŸš€

---

*"ë””ë²„ê¹…ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤ ë‘ ë°° ì–´ë µë‹¤. ë”°ë¼ì„œ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ìµœëŒ€í•œ ì˜ë¦¬í•˜ê²Œ ì‘ì„±í–ˆë‹¤ë©´, ì •ì˜ìƒ ê·¸ê²ƒì„ ë””ë²„ê¹…í•  ë§Œí¼ ì˜ë¦¬í•˜ì§€ ëª»í•˜ë‹¤." - Brian Kernighan*
